const data = 	'[Event "Live Chess"]\n[Site "Chess.com"]\n[Date "2024.04.01"]\n[Round "-"]\n[White "BenArthurOce"]\n[Black "manjeshkaushik"]\n[Result "0-1"]\n[CurrentPosition "1R6/4k3/4p3/p2b1r2/1p6/1P4KP/P1P2b2/4R3 w - -"]\n[Timezone "UTC"]\n[ECO "B29"]\n[ECOUrl "https://www.chess.com/openings/Sicilian-Defense-Nimzowitsch-Advance-Variation"]\n[UTCDate "2024.04.01"]\n[UTCTime "10:52:31"]\n[WhiteElo "1224"]\n[BlackElo "1194"]\n[TimeControl "600"]\n[Termination "manjeshkaushik won by resignation"]\n[StartTime "10:52:31"]\n[EndDate "2024.04.01"]\n[EndTime "11:09:50"]\n[Link "https://www.chess.com/game/live/105707476535"]\n\n1. e4 {[%clk 0:09:59.3]} 1... c5 {[%clk 0:09:55.1]} 2. Nf3 {[%clk 0:09:56.7]} 2... Nf6 {[%clk 0:09:46.9]} 3. e5 {[%clk 0:09:49.5]} 3... Ng4 {[%clk 0:09:39.8]} 4. h3 {[%clk 0:09:40.7]} 4... Nh6 {[%clk 0:09:37]} 5. b3 {[%clk 0:09:21.4]} 5... d6 {[%clk 0:09:34.1]} 6. Bb2 {[%clk 0:09:15.8]} 6... dxe5 {[%clk 0:09:29.1]} 7. Nxe5 {[%clk 0:09:05.1]} 7... f6 {[%clk 0:09:09.2]} 8. Qh5+ {[%clk 0:08:23.3]} 8... g6 {[%clk 0:09:03.2]} 9. Nxg6 {[%clk 0:08:21.2]} 9... hxg6 {[%clk 0:08:58.4]} 10. Qxg6+ {[%clk 0:08:19.1]} 10... Nf7 {[%clk 0:08:54.6]} 11. Bc4 {[%clk 0:08:15.5]} 11... e6 {[%clk 0:08:40.5]} 12. Bxf6 {[%clk 0:07:59.6]} 12... Rh6 {[%clk 0:08:30.2]} 13. Qxh6 {[%clk 0:07:48.3]} 13... Nxh6 {[%clk 0:08:19.5]} 14. Bxd8 {[%clk 0:07:46]} 14... Kxd8 {[%clk 0:08:16.3]} 15. O-O {[%clk 0:07:41.7]} 15... Bg7 {[%clk 0:08:14.7]} 16. Nc3 {[%clk 0:07:38.3]} 16... Nc6 {[%clk 0:08:10.8]} 17. Rac1 {[%clk 0:07:13.2]} 17... Nd4 {[%clk 0:08:04.4]} 18. f4 {[%clk 0:06:51.6]} 18... b5 {[%clk 0:07:47.4]} 19. Bd3 {[%clk 0:06:39.9]} 19... b4 {[%clk 0:07:42.9]} 20. Nb5 {[%clk 0:06:29.4]} 20... Nhf5 {[%clk 0:07:28.2]} 21. Nxd4 {[%clk 0:06:21.8]} 21... Bxd4+ {[%clk 0:07:21.6]} 22. Kh2 {[%clk 0:06:14.4]} 22... Bb2 {[%clk 0:06:58.6]} 23. Rce1 {[%clk 0:05:58.6]} 23... a5 {[%clk 0:06:40.9]} 24. Re2 {[%clk 0:05:49.5]} 24... Ra7 {[%clk 0:06:30.3]} 25. Rfe1 {[%clk 0:05:44]} 25... Nd4 {[%clk 0:06:10.5]} 26. Re4 {[%clk 0:05:27.2]} 26... Rg7 {[%clk 0:06:04.1]} 27. Re5 {[%clk 0:04:30.3]} 27... Bb7 {[%clk 0:05:36.6]} 28. Rg5 {[%clk 0:03:56.5]} 28... Rf7 {[%clk 0:05:16]} 29. Rxc5 {[%clk 0:03:27.2]} 29... Rg7 {[%clk 0:04:56.3]} 30. Rg5 {[%clk 0:03:20.7]} 30... Rf7 {[%clk 0:04:45.2]} 31. Rg8+ {[%clk 0:02:52.4]} 31... Ke7 {[%clk 0:04:38.4]} 32. f5 {[%clk 0:02:46.6]} 32... Nxf5 {[%clk 0:04:27.2]} 33. Bxf5 {[%clk 0:02:41.9]} 33... Rxf5 {[%clk 0:04:25]} 34. Rg6 {[%clk 0:02:29.6]} 34... Bd5 {[%clk 0:04:15.2]} 35. Kg3 {[%clk 0:02:12.3]} 35... Be5+ {[%clk 0:04:07.1]} 36. Kg4 {[%clk 0:02:00.7]} 36... Bxg2 {[%clk 0:03:58.1]} 37. d4 {[%clk 0:01:39.6]} 37... Bf3+ {[%clk 0:03:55]} 38. Kh4 {[%clk 0:01:24.9]} 38... Bf6+ {[%clk 0:03:52.8]} 39. Kg3 {[%clk 0:01:15.8]} 39... Kd6 {[%clk 0:03:19.9]} 40. Rg8 {[%clk 0:00:54]} 40... Bd5 {[%clk 0:02:56.6]} 41. Rb8 {[%clk 0:00:41.5]} 41... Bxd4 {[%clk 0:02:42.4]} 42. Rd8+ {[%clk 0:00:37]} 42... Ke7 {[%clk 0:02:40.4]} 43. Rb8 {[%clk 0:00:31.3]} 43... Bf2+ {[%clk 0:02:35.4]} 0-1\n'


// console.log(data)

const parseStringToObject2 = (inputString) => {
    const regex = /\[([\w\s]+)\s"([^"]+)"\]/g;
    let match;
    const obj = {};

    while ((match = regex.exec(inputString)) !== null) {
        obj[match[1]] = match[2];
    }

    return obj;
};

const parseStringToObject = (inputString) => {
    const regex = /\[([\w\s]+)\s"([^"]+)"\]/g;
    let match;
    const obj = {};
    let remainingData = inputString; // Initialize remaining data with the input string

    while ((match = regex.exec(inputString)) !== null) {
        const key = match[1];
        const value = match[2];
        obj[key] = value;
        // Update remaining data by removing the matched key-value pair
        remainingData = remainingData.replace(match[0], '').trim();
    }

    obj.moves = buildMoveString(remainingData)
    return obj;
};


    // Takes the moves and the PGN with the clock and only returns the moves
    const buildMoveString = (input) => {

        // Remove everything between curly and square brackets, including the brackets themselves
        const step1 = input.replace(/\{[^{}]*\}|\[[^\[\]]*\]/g, '');
    
        // Remove any instance of "..." along with the number before it and replace with a single space
        const step2 = step1.replace(/\d+\.{3}/g, ' ');
    
        // Replace multiple spaces with a single space
        const step3 = step2.replace(/\s+/g, ' ');
    
        // Remove spaces around single periods
        const step4 = step3.replace(/\s+\./g, '.').replace(/\.\s+/g, '.');
    
        // Trim any leading or trailing spaces
        const step5 = step4.trim();
        
        return step5;
    }



const result = parseStringToObject(data)
console.log(result)